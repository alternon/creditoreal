<app-loading></app-loading>
<div class="login-wrapper" fxLayout="column" fxLayoutAlign="center center">
    <div>
        <div class="header-component" fxLayout="row" fxLayoutAlign="space-between start">
            <div>
                <h1>Cambiar Contraseña</h1>
                <p>Modifica la contraseña asociada a tu usuario</p>
            </div>
            <div>
                <img src="./assets/icon-contact.png">
            </div> 
        </div>
        <div class="alert">
            <p>La nueva contraseña debe tener:</p>
            <ul>
                <li>Mínimo 8 y máximo 20 caracteres</li>
                <li>Una mayúscula y una minúscula</li>
                <li>Un número y un caracter especial</li>
            </ul>
        </div>
        <form [formGroup]="cambiarContrasenaForm" class="form block-cambiar-contrasena">
            <mat-card-content>
                <mat-form-field class="full-width" appearance="outline">
                    <mat-label>Contraseña actual</mat-label>
                    <input matInput placeholder="" autocomplete="off" type="password" formControlName="actualcontrasena" required>
                </mat-form-field>
                <mat-form-field class="full-width" appearance="outline">
                    <mat-label>Nueva contraseña</mat-label>
                    <input matInput placeholder="" autocomplete="off" type="password" formControlName="nuevacontrasena" required>

                    <mat-error *ngIf="cambiarContrasenaForm.get('nuevacontrasena').hasError('required')">
                        Dato Requerido
                    </mat-error>
                    <mat-error *ngIf="cambiarContrasenaForm.get('nuevacontrasena').hasError('minlength')">
                        Se requiere mínimo 8 caracteres
                    </mat-error>
                    <mat-error *ngIf="cambiarContrasenaForm.get('nuevacontrasena').hasError('maxlength')">
                        Máximo 20 caracteres
                    </mat-error>
                    <mat-error *ngIf="cambiarContrasenaForm.get('nuevacontrasena').hasError('pattern')">
                        Mayúsculas, minúsculas y números
                    </mat-error>

                </mat-form-field>
                <mat-form-field class="full-width" appearance="outline">
                    <mat-label>Confirmar contraseña</mat-label>
                    <input matInput placeholder="" autocomplete="off" type="password" formControlName="confirmarcontrasena" [errorStateMatcher]="matcher">
                    <mat-error *ngIf="cambiarContrasenaForm.hasError('notSame')">
                        La contraseña de confirmación no coincide.
                    </mat-error>
                </mat-form-field>
            </mat-card-content>
            <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="10px">
                <button mat-raised-button class="btn-block half-width" routerLink="/login/olvide-contrasena" type="button">Regresar</button>
                <button mat-raised-button color="accent" class="btn-block half-width" [disabled]="!cambiarContrasenaForm.valid" (click)="obtenerDatos()" type="button">Continuar</button>
            </div>
        </form>
    </div>
</div>
